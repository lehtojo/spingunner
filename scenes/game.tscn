[gd_scene load_steps=20 format=3 uid="uid://c6egfltalfs6d"]

[ext_resource type="Script" path="res://scripts/Spaceship.cs" id="1_e7yaq"]
[ext_resource type="PackedScene" uid="uid://ctcbb2vfr0et1" path="res://scenes/projectile.tscn" id="2_kcmlc"]
[ext_resource type="Texture2D" uid="uid://b1q51qwd5gypr" path="res://sprites/circle.png" id="2_sav4l"]
[ext_resource type="PackedScene" uid="uid://ddo0s4ji68k62" path="res://scenes/explosion.tscn" id="3_c0awg"]
[ext_resource type="Script" path="res://scripts/MeteoriteSpawner.cs" id="3_c8w6i"]
[ext_resource type="Texture2D" uid="uid://cyd1643q524op" path="res://sprites/box.png" id="4_7wtao"]
[ext_resource type="Script" path="res://scripts/Cannon.cs" id="5_x0ifc"]
[ext_resource type="PackedScene" uid="uid://ckeoiaexmcks8" path="res://scenes/meteorite.tscn" id="6_31u28"]
[ext_resource type="AudioStream" uid="uid://8h2uxc8o35sl" path="res://sounds/cannon.wav" id="6_dgr32"]
[ext_resource type="FontFile" uid="uid://bi1udhkgrc7tf" path="res://config/font.ttf" id="7_1skhv"]
[ext_resource type="Script" path="res://scripts/PointCounter.cs" id="7_6phd5"]
[ext_resource type="PackedScene" uid="uid://d4ctclc5ppj7d" path="res://scenes/score.tscn" id="9_xooyc"]
[ext_resource type="AudioStream" uid="uid://d2c858430n3xv" path="res://sounds/music.mp3" id="12_d2vq6"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_nyol3"]
friction = 0.0
bounce = 1.0

[sub_resource type="CircleShape2D" id="CircleShape2D_cb8fj"]
radius = 16.0

[sub_resource type="SegmentShape2D" id="SegmentShape2D_ycpv4"]
a = Vector2(0, -360)
b = Vector2(0, 360)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_5vypt"]
a = Vector2(640, 0)
b = Vector2(-640, 0)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_je4wq"]
content_margin_top = 48.0
content_margin_right = 48.0

[sub_resource type="LabelSettings" id="LabelSettings_y0hb0"]
font = ExtResource("7_1skhv")
font_size = 32

[node name="Root" type="Node2D"]

[node name="Spaceship" type="RigidBody2D" parent="." node_paths=PackedStringArray("Root", "Cannons", "CannonSound")]
collision_mask = 3
physics_material_override = SubResource("PhysicsMaterial_nyol3")
gravity_scale = 0.0
max_contacts_reported = 32
contact_monitor = true
script = ExtResource("1_e7yaq")
Root = NodePath("..")
RotationSpeed = 3.142
ShakeStrength = 16.0
ShakeFade = 10.0
ShootCooldown = 0.25
Cannons = [NodePath("Cannon 1"), NodePath("Cannon 2"), NodePath("Cannon 3")]
Explosion = ExtResource("3_c0awg")
CannonSound = NodePath("Cannon Audio")

[node name="Shape" type="CollisionShape2D" parent="Spaceship"]
shape = SubResource("CircleShape2D_cb8fj")

[node name="Sprite" type="Sprite2D" parent="Spaceship"]
modulate = Color(0, 1, 0, 1)
texture = ExtResource("2_sav4l")

[node name="Cannon 1" type="Sprite2D" parent="Spaceship" node_paths=PackedStringArray("ProjectileSpawnpoint")]
modulate = Color(0, 1, 0, 1)
position = Vector2(25, 0)
scale = Vector2(0.75, 0.2)
texture = ExtResource("4_7wtao")
script = ExtResource("5_x0ifc")
Projectile = ExtResource("2_kcmlc")
ProjectileSpawnpoint = NodePath("Spawnpoint")

[node name="Spawnpoint" type="Node2D" parent="Spaceship/Cannon 1"]
position = Vector2(11, 0)

[node name="Line" type="Line2D" parent="Spaceship/Cannon 1"]
points = PackedVector2Array(0, 0, 2560, 0)
default_color = Color(0.501961, 0.501961, 0.501961, 0.501961)

[node name="Cannon 2" type="Sprite2D" parent="Spaceship" node_paths=PackedStringArray("ProjectileSpawnpoint")]
modulate = Color(0, 1, 0, 1)
position = Vector2(24, -11)
rotation = -0.261799
scale = Vector2(0.75, 0.2)
texture = ExtResource("4_7wtao")
script = ExtResource("5_x0ifc")
Projectile = ExtResource("2_kcmlc")
ProjectileSpawnpoint = NodePath("Spawnpoint")

[node name="Spawnpoint" type="Node2D" parent="Spaceship/Cannon 2"]
position = Vector2(11, 0)

[node name="Line" type="Line2D" parent="Spaceship/Cannon 2"]
points = PackedVector2Array(0, 0, 2560, 0)
default_color = Color(0.501961, 0.501961, 0.501961, 0.501961)

[node name="Cannon 3" type="Sprite2D" parent="Spaceship" node_paths=PackedStringArray("ProjectileSpawnpoint")]
modulate = Color(0, 1, 0, 1)
position = Vector2(24, 11)
rotation = 0.261799
scale = Vector2(0.75, 0.2)
texture = ExtResource("4_7wtao")
script = ExtResource("5_x0ifc")
Projectile = ExtResource("2_kcmlc")
ProjectileSpawnpoint = NodePath("Spawnpoint")

[node name="Spawnpoint" type="Node2D" parent="Spaceship/Cannon 3"]
position = Vector2(11, 0)

[node name="Line" type="Line2D" parent="Spaceship/Cannon 3"]
points = PackedVector2Array(0, 0, 2560, 0)
default_color = Color(0.501961, 0.501961, 0.501961, 0.501961)

[node name="Cannon Audio" type="AudioStreamPlayer" parent="Spaceship"]
stream = ExtResource("6_dgr32")
pitch_scale = 1.5

[node name="Spawner" type="Node2D" parent="." node_paths=PackedStringArray("Root")]
script = ExtResource("3_c8w6i")
Meteorite = ExtResource("6_31u28")
Root = NodePath("..")
SpawnIntervalRange = Vector2(0.4, 3)
VelocityRange = Vector2(32, 128)
RotationSpeedRange = Vector2(0.785, 3.142)

[node name="Camera" type="Camera2D" parent="."]

[node name="Boundaries" type="Node2D" parent="."]

[node name="Left" type="StaticBody2D" parent="Boundaries"]
position = Vector2(-544, 0)
collision_layer = 2
collision_mask = 2

[node name="Shape" type="CollisionShape2D" parent="Boundaries/Left"]
shape = SubResource("SegmentShape2D_ycpv4")

[node name="Line" type="Line2D" parent="Boundaries/Left"]
points = PackedVector2Array(0, 293, 0, -293)
width = 2.0
default_color = Color(0, 1, 0, 1)
texture_mode = 2

[node name="Right" type="StaticBody2D" parent="Boundaries"]
position = Vector2(544, 0)
collision_layer = 2
collision_mask = 2

[node name="Shape" type="CollisionShape2D" parent="Boundaries/Right"]
shape = SubResource("SegmentShape2D_ycpv4")

[node name="Line" type="Line2D" parent="Boundaries/Right"]
points = PackedVector2Array(0, 293, 0, -293)
width = 2.0
default_color = Color(0, 1, 0, 1)

[node name="Bottom" type="StaticBody2D" parent="Boundaries"]
position = Vector2(0, 292)
collision_layer = 2
collision_mask = 2

[node name="Shape" type="CollisionShape2D" parent="Boundaries/Bottom"]
shape = SubResource("SegmentShape2D_5vypt")

[node name="Line" type="Line2D" parent="Boundaries/Bottom"]
points = PackedVector2Array(544, 0, -544, 0)
width = 2.0
default_color = Color(0, 1, 0, 1)

[node name="Top" type="StaticBody2D" parent="Boundaries"]
position = Vector2(0, -292)
collision_layer = 2
collision_mask = 2

[node name="Shape" type="CollisionShape2D" parent="Boundaries/Top"]
shape = SubResource("SegmentShape2D_5vypt")

[node name="Line" type="Line2D" parent="Boundaries/Top"]
points = PackedVector2Array(544, 0, -544, 0)
width = 2.0
default_color = Color(0, 1, 0, 1)

[node name="Gui" type="CanvasLayer" parent="."]

[node name="Points" type="Label" parent="Gui"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -40.0
offset_bottom = 23.0
grow_horizontal = 0
theme_override_styles/normal = SubResource("StyleBoxEmpty_je4wq")
text = "1000"
label_settings = SubResource("LabelSettings_y0hb0")
script = ExtResource("7_6phd5")
PointsPerSecond = 100

[node name="Score" parent="Gui" instance=ExtResource("9_xooyc")]
initial_position = 2
visible = false

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = ExtResource("12_d2vq6")
autoplay = true
